{"ast":null,"code":"import { onMounted } from \"vue\";\nimport gsap from \"gsap\";\n// 背景控制对象\n\nexport default {\n  __name: 'background',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const background = {\n      balls: null,\n      //所有的背景移动小球\n      mouse_x: 0,\n      //坐标x\n      mouse_y: 0,\n      //坐标y\n      distance_x: 0,\n      //横向移动距离\n      distance_y: 0,\n      //竖向移动距离\n      init() {\n        this.balls = document.querySelectorAll(\".background div\");\n        // 绑定监听事件\n        document.addEventListener(\"mousemove\", e => {\n          this.move_balls(e.x, e.y);\n        });\n        document.addEventListener(\"touchmove\", e => {\n          this.move_balls(e.touches[0].clientX, e.touches[0].clientY);\n        });\n        document.addEventListener(\"mouseleave\", e => {\n          this.reset_balls();\n        });\n        document.addEventListener(\"touchend\", e => {\n          this.reset_balls();\n        });\n      },\n      // 移动背景模糊小球\n      move_balls(x, y) {\n        // 防止大幅度抖动：例如在鼠标离开界面后再回来\n        if (Math.abs(x - this.mouse_x) >= innerWidth / 10) this.mouse_x = x;\n        if (Math.abs(y - this.mouse_y) >= innerHeight / 10) this.mouse_y = y;\n        // 更新距离:将距离与屏幕尺寸绑定：避免不同尺寸下移动距离差异过大\n        this.distance_x += (x - this.mouse_x) / innerWidth * 80;\n        this.distance_y += (y - this.mouse_y) / innerHeight * 80;\n        // 移动小球\n        gsap.to(this.balls, {\n          x: `${-this.distance_x}px`,\n          y: `${-this.distance_y}px`,\n          duration: 3,\n          ease: \"power3.out\"\n        });\n        // 更新坐标\n        this.mouse_x = x;\n        this.mouse_y = y;\n      },\n      // 复位所有背景模糊小球\n      reset_balls() {\n        gsap.to(this.balls, {\n          x: 0,\n          y: 0,\n          duration: 5,\n          ease: \"power3.out\"\n        });\n        this.distance_x = this.distance_y = 0;\n      }\n    };\n    onMounted(() => {\n      background.init();\n    });\n    const __returned__ = {\n      background,\n      onMounted,\n      get gsap() {\n        return gsap;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","gsap","background","balls","mouse_x","mouse_y","distance_x","distance_y","init","document","querySelectorAll","addEventListener","e","move_balls","x","y","touches","clientX","clientY","reset_balls","Math","abs","innerWidth","innerHeight","to","duration","ease"],"sources":["E:/SnakeBall/src/components/layout/background.vue"],"sourcesContent":["<template>\r\n    <div class=\"background _fullscreen\">\r\n        <!-- 这里的模糊小球用图片代替滤镜是为了适配safari浏览器，safari对于滤镜不太友好，大范围模糊容易卡顿 -->\r\n        <div style=\"--s:1.5;--x:-0.1;--y:-0.3;--o:1\">\r\n            <img :src=\"require('@/assets/images/blurball.png')\" alt=\"blurball\" />\r\n        </div>\r\n        <div style=\"--s:1.3;--x:-0.05;--y:0.75;--o:1\">\r\n            <img :src=\"require('@/assets/images/blurball.png')\" alt=\"blurball\" />\r\n        </div>\r\n        <div style=\"--s:0.9;--x:0.7;--y:0;--o:0.8\">\r\n            <img :src=\"require('@/assets/images/blurball.png')\" alt=\"blurball\" />\r\n        </div>\r\n        <div style=\"--s:0.4;--x:0.88;--y:0.45;--o:0.6\">\r\n            <img :src=\"require('@/assets/images/blurball.png')\" alt=\"blurball\" />\r\n        </div>\r\n        <div style=\"--s:0.5;--x:0.6;--y:0.85;--o:0.7\">\r\n            <img :src=\"require('@/assets/images/blurball.png')\" alt=\"blurball\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted } from \"vue\";\r\nimport gsap from \"gsap\";\r\n// 背景控制对象\r\nconst background = {\r\n    balls: null, //所有的背景移动小球\r\n    mouse_x: 0, //坐标x\r\n    mouse_y: 0, //坐标y\r\n    distance_x: 0, //横向移动距离\r\n    distance_y: 0, //竖向移动距离\r\n    init() {\r\n        this.balls = document.querySelectorAll(\".background div\");\r\n        // 绑定监听事件\r\n        document.addEventListener(\"mousemove\", (e) => {\r\n            this.move_balls(e.x, e.y);\r\n        });\r\n        document.addEventListener(\"touchmove\", (e) => {\r\n            this.move_balls(e.touches[0].clientX, e.touches[0].clientY);\r\n        });\r\n        document.addEventListener(\"mouseleave\", (e) => {\r\n            this.reset_balls();\r\n        });\r\n        document.addEventListener(\"touchend\", (e) => {\r\n            this.reset_balls();\r\n        });\r\n    },\r\n    // 移动背景模糊小球\r\n    move_balls(x, y) {\r\n        // 防止大幅度抖动：例如在鼠标离开界面后再回来\r\n        if (Math.abs(x - this.mouse_x) >= innerWidth / 10) this.mouse_x = x;\r\n        if (Math.abs(y - this.mouse_y) >= innerHeight / 10) this.mouse_y = y;\r\n        // 更新距离:将距离与屏幕尺寸绑定：避免不同尺寸下移动距离差异过大\r\n        this.distance_x += ((x - this.mouse_x) / innerWidth) * 80;\r\n        this.distance_y += ((y - this.mouse_y) / innerHeight) * 80;\r\n        // 移动小球\r\n        gsap.to(this.balls, {\r\n            x: `${-this.distance_x}px`,\r\n            y: `${-this.distance_y}px`,\r\n            duration: 3,\r\n            ease: \"power3.out\",\r\n        });\r\n        // 更新坐标\r\n        this.mouse_x = x;\r\n        this.mouse_y = y;\r\n    },\r\n    // 复位所有背景模糊小球\r\n    reset_balls() {\r\n        gsap.to(this.balls, {\r\n            x: 0,\r\n            y: 0,\r\n            duration: 5,\r\n            ease: \"power3.out\",\r\n        });\r\n        this.distance_x = this.distance_y = 0;\r\n    },\r\n};\r\nonMounted(() => {\r\n    background.init();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.background {\r\n    --scale: 1;\r\n    pointer-events: none;\r\n}\r\n.background div {\r\n    position: absolute;\r\n    left: calc(100% * var(--x));\r\n    top: calc(100% * var(--y));\r\n    width: calc(var(--scale) * 50rem * var(--s));\r\n    height: calc(var(--scale) * 50rem * var(--s));\r\n    opacity: var(--o);\r\n}\r\n/* 黑暗模式下，小球亮了点，这里再减去一点透明度 */\r\n._darkmode .background div {\r\n    opacity: calc(var(--o) - 0.4);\r\n}\r\n.background div img {\r\n    position: relative;\r\n    width: 120%;\r\n    height: 120%;\r\n}\r\n</style>"],"mappings":"AAsBA,SAASA,SAAS,QAAQ,KAAK;AAC/B,OAAOC,IAAI,MAAM,MAAM;AACvB;;;;;;;;IACA,MAAMC,UAAU,GAAG;MACfC,KAAK,EAAE,IAAI;MAAE;MACbC,OAAO,EAAE,CAAC;MAAE;MACZC,OAAO,EAAE,CAAC;MAAE;MACZC,UAAU,EAAE,CAAC;MAAE;MACfC,UAAU,EAAE,CAAC;MAAE;MACfC,IAAIA,CAAA,EAAG;QACH,IAAI,CAACL,KAAK,GAAGM,QAAQ,CAACC,gBAAgB,CAAC,iBAAiB,CAAC;QACzD;QACAD,QAAQ,CAACE,gBAAgB,CAAC,WAAW,EAAGC,CAAC,IAAK;UAC1C,IAAI,CAACC,UAAU,CAACD,CAAC,CAACE,CAAC,EAAEF,CAAC,CAACG,CAAC,CAAC;QAC7B,CAAC,CAAC;QACFN,QAAQ,CAACE,gBAAgB,CAAC,WAAW,EAAGC,CAAC,IAAK;UAC1C,IAAI,CAACC,UAAU,CAACD,CAAC,CAACI,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO,EAAEL,CAAC,CAACI,OAAO,CAAC,CAAC,CAAC,CAACE,OAAO,CAAC;QAC/D,CAAC,CAAC;QACFT,QAAQ,CAACE,gBAAgB,CAAC,YAAY,EAAGC,CAAC,IAAK;UAC3C,IAAI,CAACO,WAAW,CAAC,CAAC;QACtB,CAAC,CAAC;QACFV,QAAQ,CAACE,gBAAgB,CAAC,UAAU,EAAGC,CAAC,IAAK;UACzC,IAAI,CAACO,WAAW,CAAC,CAAC;QACtB,CAAC,CAAC;MACN,CAAC;MACD;MACAN,UAAUA,CAACC,CAAC,EAAEC,CAAC,EAAE;QACb;QACA,IAAIK,IAAI,CAACC,GAAG,CAACP,CAAC,GAAG,IAAI,CAACV,OAAO,CAAC,IAAIkB,UAAU,GAAG,EAAE,EAAE,IAAI,CAAClB,OAAO,GAAGU,CAAC;QACnE,IAAIM,IAAI,CAACC,GAAG,CAACN,CAAC,GAAG,IAAI,CAACV,OAAO,CAAC,IAAIkB,WAAW,GAAG,EAAE,EAAE,IAAI,CAAClB,OAAO,GAAGU,CAAC;QACpE;QACA,IAAI,CAACT,UAAU,IAAK,CAACQ,CAAC,GAAG,IAAI,CAACV,OAAO,IAAIkB,UAAU,GAAI,EAAE;QACzD,IAAI,CAACf,UAAU,IAAK,CAACQ,CAAC,GAAG,IAAI,CAACV,OAAO,IAAIkB,WAAW,GAAI,EAAE;QAC1D;QACAtB,IAAI,CAACuB,EAAE,CAAC,IAAI,CAACrB,KAAK,EAAE;UAChBW,CAAC,EAAE,GAAG,CAAC,IAAI,CAACR,UAAU,IAAI;UAC1BS,CAAC,EAAE,GAAG,CAAC,IAAI,CAACR,UAAU,IAAI;UAC1BkB,QAAQ,EAAE,CAAC;UACXC,IAAI,EAAE;QACV,CAAC,CAAC;QACF;QACA,IAAI,CAACtB,OAAO,GAAGU,CAAC;QAChB,IAAI,CAACT,OAAO,GAAGU,CAAC;MACpB,CAAC;MACD;MACAI,WAAWA,CAAA,EAAG;QACVlB,IAAI,CAACuB,EAAE,CAAC,IAAI,CAACrB,KAAK,EAAE;UAChBW,CAAC,EAAE,CAAC;UACJC,CAAC,EAAE,CAAC;UACJU,QAAQ,EAAE,CAAC;UACXC,IAAI,EAAE;QACV,CAAC,CAAC;QACF,IAAI,CAACpB,UAAU,GAAG,IAAI,CAACC,UAAU,GAAG,CAAC;MACzC;IACJ,CAAC;IACDP,SAAS,CAAC,MAAM;MACZE,UAAU,CAACM,IAAI,CAAC,CAAC;IACrB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}