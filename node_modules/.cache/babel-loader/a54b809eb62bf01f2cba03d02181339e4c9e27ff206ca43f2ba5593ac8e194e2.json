{"ast":null,"code":"import { global } from \"@/stores/global\";\nimport I1 from \"@/components/instrutions/i1.vue\";\nimport I2 from \"@/components/instrutions/i2.vue\";\nimport I3 from \"@/components/instrutions/i3.vue\";\nimport I4 from \"@/components/instrutions/i4.vue\";\nimport Closebtn from \"@/components/ui/closebtn.vue\";\nimport { onMounted, ref } from \"vue\";\nimport gsap from \"gsap\";\nexport default {\n  __name: 'instrution',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = global();\n    // instrution控制对象\n    const instrution = {\n      // DOM元素\n      container: null,\n      circle: null,\n      lines: null,\n      images: null,\n      //动画播放器\n      animater: null,\n      if_visible: ref(false),\n      //instrution是否可见\n      init() {\n        this.container = document.querySelector(\".instrution\");\n        this.circle = document.querySelector(\".instrution_circle\");\n        this.lines = document.querySelectorAll(\".instrution_line\");\n        this.images = document.querySelectorAll(\".instrution_images div\");\n      },\n      // 重置instrution动画样式\n      reset() {\n        gsap.timeline().set(this.container, {\n          clipPath: \"polygon(0% 0%, 0% 0%, 0% 100%, 0% 100%)\"\n        }).set(this.circle, {\n          scale: 0\n        }).set(this.lines, {\n          clipPath: \"polygon(50% 0%, 50% 0%, 50% 100%, 50% 100%)\"\n        }).set(this.images, {\n          clipPath: \"circle(0%)\",\n          x: \"-20%\"\n        });\n      },\n      // 显示instrution\n      show(immediate) {\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\n        if (this.animater && this.animater.isActive()) return;\n        if (immediate) immediate(); //存在立即执行代码，则立即执行\n        this.reset(); //重置\n        this.if_visible.value = true; //显示instrution\n        // 播放动画\n        this.animater = gsap.timeline().to(this.container, {\n          clipPath: \"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)\",\n          duration: 1,\n          ease: \"power3.inOut\"\n        }).to(this.circle, {\n          scale: 1,\n          duration: 1.5,\n          ease: \"power3.out\"\n        }, \"<0.5\").to(this.lines, {\n          clipPath: \"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)\",\n          duration: 1.5,\n          ease: \"power3.out\"\n        }, \"<\").to(this.images, {\n          clipPath: \"circle(100%)\",\n          x: 0,\n          duration: 1.5,\n          ease: \"power3.out\",\n          stagger: 0.05\n        }, \"<0.4\");\n      },\n      // 隐藏instrution\n      hidden() {\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\n        if (this.animater && this.animater.isActive()) return;\n        // 播放动画\n        this.animater = gsap.to(this.container, {\n          clipPath: \"polygon(100% 0%, 100% 0%, 100% 100%, 100% 100%)\",\n          duration: 1,\n          ease: \"power3.inOut\",\n          onComplete: () => {\n            this.if_visible.value = false; // 隐藏instrution\n          }\n        });\n      }\n    };\n    // 储存全局功能函数\n    store.show_instrution = () => {\n      // 这里将按钮音效播放放在show函数内部，是为了避免多次点击而多次播放音效的BUG\n      instrution.show(() => {\n        store.audio_controller.button.play();\n      });\n    };\n    onMounted(() => {\n      instrution.init();\n    });\n    const __returned__ = {\n      store,\n      instrution,\n      get global() {\n        return global;\n      },\n      I1,\n      I2,\n      I3,\n      I4,\n      Closebtn,\n      onMounted,\n      ref,\n      get gsap() {\n        return gsap;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["global","I1","I2","I3","I4","Closebtn","onMounted","ref","gsap","store","instrution","container","circle","lines","images","animater","if_visible","init","document","querySelector","querySelectorAll","reset","timeline","set","clipPath","scale","x","show","immediate","isActive","value","to","duration","ease","stagger","hidden","onComplete","show_instrution","audio_controller","button","play"],"sources":["E:/SnakeBall/src/components/sections/instrution.vue"],"sourcesContent":["<template>\r\n    <div class=\"instrution _fullscreen\" v-show=\"instrution.if_visible.value\">\r\n        <svg viewBox=\"0 0 50 50\" class=\"instrution_circle\">\r\n            <circle class=\"_dashed\" cx=\"25\" cy=\"25\" r=\"25\" vector-effect=\"non-scaling-stroke\" />\r\n        </svg>\r\n        <svg viewBox=\"0 0 50 2\" class=\"instrution_line\">\r\n            <line class=\"_dashed\" x1=\"0\" y1=\"1\" x2=\"50\" y2=\"1\" vector-effect=\"non-scaling-stroke\" />\r\n        </svg>\r\n        <svg viewBox=\"0 0 50 2\" class=\"instrution_line instrution_line_vertical\">\r\n            <line class=\"_dashed\" x1=\"0\" y1=\"1\" x2=\"50\" y2=\"1\" vector-effect=\"non-scaling-stroke\" />\r\n        </svg>\r\n        <div class=\"instrution_ball _middle_ball\"></div>\r\n        <div class=\"instrution_images\">\r\n            <div style=\"--l:0%;--t:0%\">\r\n                <I1 />\r\n            </div>\r\n            <div style=\"--r:0%;--t:0%\">\r\n                <I2 />\r\n            </div>\r\n            <div style=\"--l:0%;--b:0%\">\r\n                <I3 />\r\n            </div>\r\n            <div style=\"--r:0%;--b:0%\">\r\n                <I4 />\r\n            </div>\r\n        </div>\r\n        <div class=\"instrution_closebtn\" @click=\"instrution.hidden\">\r\n            <Closebtn :if_reverse=\"true\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { global } from \"@/stores/global\";\r\nimport I1 from \"@/components/instrutions/i1.vue\";\r\nimport I2 from \"@/components/instrutions/i2.vue\";\r\nimport I3 from \"@/components/instrutions/i3.vue\";\r\nimport I4 from \"@/components/instrutions/i4.vue\";\r\nimport Closebtn from \"@/components/ui/closebtn.vue\";\r\nimport { onMounted, ref } from \"vue\";\r\nimport gsap from \"gsap\";\r\nconst store = global();\r\n// instrution控制对象\r\nconst instrution = {\r\n    // DOM元素\r\n    container: null,\r\n    circle: null,\r\n    lines: null,\r\n    images: null,\r\n    //动画播放器\r\n    animater: null,\r\n    if_visible: ref(false), //instrution是否可见\r\n    init() {\r\n        this.container = document.querySelector(\".instrution\");\r\n        this.circle = document.querySelector(\".instrution_circle\");\r\n        this.lines = document.querySelectorAll(\".instrution_line\");\r\n        this.images = document.querySelectorAll(\".instrution_images div\");\r\n    },\r\n    // 重置instrution动画样式\r\n    reset() {\r\n        gsap.timeline()\r\n            .set(this.container, {\r\n                clipPath: \"polygon(0% 0%, 0% 0%, 0% 100%, 0% 100%)\",\r\n            })\r\n            .set(this.circle, {\r\n                scale: 0,\r\n            })\r\n            .set(this.lines, {\r\n                clipPath: \"polygon(50% 0%, 50% 0%, 50% 100%, 50% 100%)\",\r\n            })\r\n            .set(this.images, {\r\n                clipPath: \"circle(0%)\",\r\n                x: \"-20%\",\r\n            });\r\n    },\r\n    // 显示instrution\r\n    show(immediate) {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        if (immediate) immediate(); //存在立即执行代码，则立即执行\r\n        this.reset(); //重置\r\n        this.if_visible.value = true; //显示instrution\r\n        // 播放动画\r\n        this.animater = gsap\r\n            .timeline()\r\n            .to(this.container, {\r\n                clipPath: \"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)\",\r\n                duration: 1,\r\n                ease: \"power3.inOut\",\r\n            })\r\n            .to(\r\n                this.circle,\r\n                {\r\n                    scale: 1,\r\n                    duration: 1.5,\r\n                    ease: \"power3.out\",\r\n                },\r\n                \"<0.5\"\r\n            )\r\n            .to(\r\n                this.lines,\r\n                {\r\n                    clipPath: \"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)\",\r\n                    duration: 1.5,\r\n                    ease: \"power3.out\",\r\n                },\r\n                \"<\"\r\n            )\r\n            .to(\r\n                this.images,\r\n                {\r\n                    clipPath: \"circle(100%)\",\r\n                    x: 0,\r\n                    duration: 1.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: 0.05,\r\n                },\r\n                \"<0.4\"\r\n            );\r\n    },\r\n    // 隐藏instrution\r\n    hidden() {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        // 播放动画\r\n        this.animater = gsap.to(this.container, {\r\n            clipPath: \"polygon(100% 0%, 100% 0%, 100% 100%, 100% 100%)\",\r\n            duration: 1,\r\n            ease: \"power3.inOut\",\r\n            onComplete: () => {\r\n                this.if_visible.value = false; // 隐藏instrution\r\n            },\r\n        });\r\n    },\r\n};\r\n// 储存全局功能函数\r\nstore.show_instrution = () => {\r\n    // 这里将按钮音效播放放在show函数内部，是为了避免多次点击而多次播放音效的BUG\r\n    instrution.show(() => {\r\n        store.audio_controller.button.play();\r\n    });\r\n};\r\nonMounted(() => {\r\n    instrution.init();\r\n});\r\n</script>\r\n\r\n<style  scoped>\r\n.instrution {\r\n    --scale: 1;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: var(--color_back);\r\n    z-index: 1000;\r\n}\r\n.instrution_circle {\r\n    position: absolute;\r\n    width: calc(var(--scale) * 85rem);\r\n    height: calc(var(--scale) * 85rem);\r\n    stroke: var(--color_front);\r\n    stroke-dasharray: 0 calc(var(--scale) * 1rem);\r\n    overflow: visible;\r\n}\r\n.instrution_line {\r\n    position: absolute;\r\n    width: 100vmax;\r\n    stroke: var(--color_front);\r\n    stroke-dasharray: 0 calc(var(--scale) * 1rem);\r\n    overflow: visible;\r\n}\r\n.instrution_line_vertical {\r\n    transform: rotate(90deg);\r\n}\r\n.instrution_ball {\r\n    position: absolute;\r\n    background-color: var(--color_back);\r\n    border: calc(var(--scale) * 0.3rem) solid var(--color_front);\r\n    background-image: linear-gradient(0deg, transparent 1.9rem, var(--color_front) 2rem),\r\n        linear-gradient(90deg, transparent 1.9rem, var(--color_front) 2rem);\r\n    background-size: 2rem 2rem;\r\n}\r\n.instrution_images {\r\n    position: absolute;\r\n    width: calc(var(--scale) * 110rem);\r\n    height: calc(var(--scale) * 65rem);\r\n}\r\n.instrution_images div {\r\n    position: absolute;\r\n    justify-content: center;\r\n    align-items: center;\r\n    left: var(--l);\r\n    top: var(--t);\r\n    right: var(--r);\r\n    bottom: var(--b);\r\n    width: calc(var(--scale) * 3.2rem * 16);\r\n    height: calc(var(--scale) * 3.2rem * 9);\r\n    background-color: var(--color_front);\r\n    cursor: pointer;\r\n    overflow: hidden;\r\n}\r\n.instrution_images div svg {\r\n    position: relative;\r\n    width: 100%;\r\n    transform: scale(1.1);\r\n    transition: transform 1s var(--ease_out);\r\n}\r\n@media (hover: hover) {\r\n    .instrution_images div:hover svg {\r\n        transform: scale(1);\r\n    }\r\n}\r\n.instrution_closebtn {\r\n    position: absolute;\r\n}\r\n@media screen and (max-aspect-ratio: 0.7/1) {\r\n    .instrution_images {\r\n        flex-direction: column;\r\n        align-items: center;\r\n        width: auto;\r\n        height: auto;\r\n    }\r\n    .instrution_images div {\r\n        position: relative;\r\n        left: auto;\r\n        top: auto;\r\n        right: auto;\r\n        bottom: auto;\r\n        margin: calc(var(--scale) * 5rem) 0;\r\n    }\r\n}\r\n@media screen and (max-aspect-ratio: 0.6/1) {\r\n    .instrution_images div {\r\n        width: calc(var(--scale) * 4rem * 16);\r\n        height: calc(var(--scale) * 4rem * 9);\r\n    }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}