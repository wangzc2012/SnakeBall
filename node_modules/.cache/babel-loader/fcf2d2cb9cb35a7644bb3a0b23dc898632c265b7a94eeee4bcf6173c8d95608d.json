{"ast":null,"code":"import { defineStore } from 'pinia';\nimport { Howl } from \"howler\";\nexport const global = defineStore('global', {\n  state: () => ({\n    // 是否为safari浏览器\n    if_safari: /^((?!chrome|android).)*safari/i.test(navigator.userAgent) && !navigator.userAgent.includes('CriOS') && typeof InstallTrigger === 'undefined',\n    // 玩家数据\n    player: {\n      id: null,\n      name: null,\n      rank: 0,\n      wave: 1,\n      lives: 0,\n      score: null,\n      time: 0,\n      if_active: false\n    },\n    // 音频控制器\n    audio_controller: {\n      // musics\n      hall: new Howl({\n        src: require(\"@/assets/audios/musics/hall.mp3\"),\n        preload: true,\n        loop: true\n      }),\n      gameing: new Howl({\n        src: require(\"@/assets/audios/musics/gameing.mp3\"),\n        preload: true,\n        loop: true\n      }),\n      win: new Howl({\n        src: require(\"@/assets/audios/musics/win.mp3\"),\n        preload: true\n      }),\n      fail: new Howl({\n        src: require(\"@/assets/audios/musics/fail.mp3\"),\n        preload: true\n      }),\n      // effects\n      button: new Howl({\n        src: require(\"@/assets/audios/effects/button.mp3\"),\n        preload: true\n      }),\n      ready: new Howl({\n        src: require(\"@/assets/audios/effects/ready.mp3\"),\n        preload: true\n      }),\n      reset: new Howl({\n        src: require(\"@/assets/audios/effects/reset.mp3\"),\n        preload: true\n      }),\n      buff: new Howl({\n        src: require(\"@/assets/audios/effects/buff.mp3\"),\n        preload: true\n      }),\n      warn: new Howl({\n        src: require(\"@/assets/audios/effects/warn.mp3\"),\n        preload: true\n      }),\n      // blasts\n      blasts: [new Howl({\n        src: require(\"@/assets/audios/blasts/blast1.mp3\"),\n        preload: true\n      }), new Howl({\n        src: require(\"@/assets/audios/blasts/blast2.mp3\"),\n        preload: true\n      }), new Howl({\n        src: require(\"@/assets/audios/blasts/blast3.mp3\"),\n        preload: true\n      }), new Howl({\n        src: require(\"@/assets/audios/blasts/blast4.mp3\"),\n        preload: true\n      }), new Howl({\n        src: require(\"@/assets/audios/blasts/blast5.mp3\"),\n        preload: true\n      })]\n    },\n    // loading\n    hidden_loading: null,\n    // welcome\n    show_welcome: null,\n    hidden_welcome: null,\n    // start\n    show_start: null,\n    hidden_start: null,\n    // instrution\n    show_instrution: null,\n    // rank\n    show_rank: null,\n    // stage\n    ready_to_game: null,\n    hidden_summary: null,\n    // databox\n    show_databox: null,\n    hidden_databox: null,\n    // menu\n    show_menu: null,\n    hidden_menu: null\n  }),\n  actions: {\n    // 初始化玩家信息\n    init_player_data(name) {\n      this.player.id = Date.now() + Math.random().toString(36).substring(2, 10);\n      this.player.name = name;\n      this.player.if_active = false;\n    },\n    // 初次加载：从loading进入界面\n    first_show() {\n      this.hidden_loading(() => {\n        this.show_welcome();\n        this.audio_controller.button.play();\n        this.audio_controller.hall.play();\n      });\n    },\n    // 从welcome进入到start\n    welcome_to_start() {\n      this.hidden_welcome(() => {\n        this.show_start();\n        this.audio_controller.button.play();\n      });\n    },\n    // 从start返回到welcome\n    start_to_welcome() {\n      this.hidden_start(() => {\n        this.show_welcome();\n      });\n    },\n    // 从start开始新的游戏\n    start_new_game() {\n      this.hidden_start(() => {\n        this.hidden_menu();\n        this.audio_controller.hall.stop();\n        this.audio_controller.button.play();\n      }, () => {\n        this.show_databox();\n        this.ready_to_game();\n        this.audio_controller.ready.play();\n      });\n    },\n    // 从welcome继续游戏\n    welcome_continue_game() {\n      this.hidden_welcome(() => {\n        this.hidden_menu();\n        this.audio_controller.hall.stop();\n        this.audio_controller.button.play();\n      }, () => {\n        this.show_databox();\n        this.ready_to_game();\n        this.audio_controller.ready.play();\n      });\n    },\n    // 从summary返回到welcome\n    summary_to_welcome() {\n      this.hidden_summary(() => {\n        this.show_welcome();\n        this.hidden_databox();\n        this.show_menu();\n      });\n    },\n    // 从summary继续游戏\n    summary_continue_game() {\n      this.hidden_summary(() => {\n        this.audio_controller.hall.stop();\n        this.audio_controller.button.play();\n      }, () => {\n        this.ready_to_game();\n        this.audio_controller.ready.play();\n      });\n    }\n  }\n});","map":{"version":3,"names":["defineStore","Howl","global","state","if_safari","test","navigator","userAgent","includes","InstallTrigger","player","id","name","rank","wave","lives","score","time","if_active","audio_controller","hall","src","require","preload","loop","gameing","win","fail","button","ready","reset","buff","warn","blasts","hidden_loading","show_welcome","hidden_welcome","show_start","hidden_start","show_instrution","show_rank","ready_to_game","hidden_summary","show_databox","hidden_databox","show_menu","hidden_menu","actions","init_player_data","Date","now","Math","random","toString","substring","first_show","play","welcome_to_start","start_to_welcome","start_new_game","stop","welcome_continue_game","summary_to_welcome","summary_continue_game"],"sources":["E:/SnakeBall/src/stores/global.js"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport { Howl } from \"howler\";\r\nexport const global = defineStore('global', {\r\n    state: () => ({\r\n        // 是否为safari浏览器\r\n        if_safari: /^((?!chrome|android).)*safari/i.test(navigator.userAgent)\r\n            && !navigator.userAgent.includes('CriOS')\r\n            && typeof InstallTrigger === 'undefined',\r\n        // 玩家数据\r\n        player: {\r\n            id: null,\r\n            name: null,\r\n            rank: 0,\r\n            wave: 1,\r\n            lives: 0,\r\n            score: null,\r\n            time: 0,\r\n            if_active: false,\r\n        },\r\n        // 音频控制器\r\n        audio_controller: {\r\n            // musics\r\n            hall: new Howl({\r\n                src: require(\"@/assets/audios/musics/hall.mp3\"),\r\n                preload: true,\r\n                loop: true,\r\n            }),\r\n            gameing: new Howl({\r\n                src: require(\"@/assets/audios/musics/gameing.mp3\"),\r\n                preload: true,\r\n                loop: true,\r\n            }),\r\n            win: new Howl({\r\n                src: require(\"@/assets/audios/musics/win.mp3\"),\r\n                preload: true,\r\n            }),\r\n            fail: new Howl({\r\n                src: require(\"@/assets/audios/musics/fail.mp3\"),\r\n                preload: true,\r\n            }),\r\n            // effects\r\n            button: new Howl({\r\n                src: require(\"@/assets/audios/effects/button.mp3\"),\r\n                preload: true,\r\n            }),\r\n            ready: new Howl({\r\n                src: require(\"@/assets/audios/effects/ready.mp3\"),\r\n                preload: true,\r\n            }),\r\n            reset: new Howl({\r\n                src: require(\"@/assets/audios/effects/reset.mp3\"),\r\n                preload: true,\r\n            }),\r\n            buff: new Howl({\r\n                src: require(\"@/assets/audios/effects/buff.mp3\"),\r\n                preload: true,\r\n            }),\r\n            warn: new Howl({\r\n                src: require(\"@/assets/audios/effects/warn.mp3\"),\r\n                preload: true,\r\n            }),\r\n            // blasts\r\n            blasts: [\r\n                new Howl({\r\n                    src: require(\"@/assets/audios/blasts/blast1.mp3\"),\r\n                    preload: true,\r\n                }),\r\n                new Howl({\r\n                    src: require(\"@/assets/audios/blasts/blast2.mp3\"),\r\n                    preload: true,\r\n                }),\r\n                new Howl({\r\n                    src: require(\"@/assets/audios/blasts/blast3.mp3\"),\r\n                    preload: true,\r\n                }),\r\n                new Howl({\r\n                    src: require(\"@/assets/audios/blasts/blast4.mp3\"),\r\n                    preload: true,\r\n                }),\r\n                new Howl({\r\n                    src: require(\"@/assets/audios/blasts/blast5.mp3\"),\r\n                    preload: true,\r\n                }),\r\n            ],\r\n        },\r\n        // loading\r\n        hidden_loading: null,\r\n        // welcome\r\n        show_welcome: null,\r\n        hidden_welcome: null,\r\n        // start\r\n        show_start: null,\r\n        hidden_start: null,\r\n        // instrution\r\n        show_instrution: null,\r\n        // rank\r\n        show_rank: null,\r\n        // stage\r\n        ready_to_game: null,\r\n        hidden_summary: null,\r\n        // databox\r\n        show_databox: null,\r\n        hidden_databox: null,\r\n        // menu\r\n        show_menu: null,\r\n        hidden_menu: null,\r\n    }),\r\n    actions: {\r\n        // 初始化玩家信息\r\n        init_player_data(name) {\r\n            this.player.id = Date.now() + Math.random().toString(36).substring(2, 10);\r\n            this.player.name = name;\r\n            this.player.if_active = false;\r\n        },\r\n        // 初次加载：从loading进入界面\r\n        first_show() {\r\n            this.hidden_loading(() => {\r\n                this.show_welcome();\r\n                this.audio_controller.button.play();\r\n                this.audio_controller.hall.play()\r\n            });\r\n        },\r\n        // 从welcome进入到start\r\n        welcome_to_start() {\r\n            this.hidden_welcome(() => {\r\n                this.show_start();\r\n                this.audio_controller.button.play();\r\n            });\r\n        },\r\n        // 从start返回到welcome\r\n        start_to_welcome() {\r\n            this.hidden_start(() => {\r\n                this.show_welcome();\r\n            });\r\n        },\r\n        // 从start开始新的游戏\r\n        start_new_game() {\r\n            this.hidden_start(() => {\r\n                this.hidden_menu();\r\n                this.audio_controller.hall.stop();\r\n                this.audio_controller.button.play();\r\n            }, () => {\r\n                this.show_databox();\r\n                this.ready_to_game();\r\n                this.audio_controller.ready.play();\r\n            });\r\n        },\r\n        // 从welcome继续游戏\r\n        welcome_continue_game() {\r\n            this.hidden_welcome(() => {\r\n                this.hidden_menu();\r\n                this.audio_controller.hall.stop();\r\n                this.audio_controller.button.play();\r\n            }, () => {\r\n                this.show_databox();\r\n                this.ready_to_game();\r\n                this.audio_controller.ready.play();\r\n            });\r\n        },\r\n        // 从summary返回到welcome\r\n        summary_to_welcome() {\r\n            this.hidden_summary(() => {\r\n                this.show_welcome();\r\n                this.hidden_databox();\r\n                this.show_menu();\r\n            });\r\n        },\r\n        // 从summary继续游戏\r\n        summary_continue_game() {\r\n            this.hidden_summary(() => {\r\n                this.audio_controller.hall.stop();\r\n                this.audio_controller.button.play();\r\n            }, () => {\r\n                this.ready_to_game();\r\n                this.audio_controller.ready.play();\r\n            });\r\n        },\r\n    }\r\n})\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}