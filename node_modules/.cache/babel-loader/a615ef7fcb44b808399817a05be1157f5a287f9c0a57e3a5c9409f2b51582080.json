{"ast":null,"code":"import { createElementVNode as _createElementVNode, createVNode as _createVNode, vShow as _vShow, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"instrution _fullscreen\"\n};\nconst _hoisted_2 = {\n  class: \"instrution_images\"\n};\nconst _hoisted_3 = {\n  style: {\n    \"--l\": \"0%\",\n    \"--t\": \"0%\"\n  }\n};\nconst _hoisted_4 = {\n  style: {\n    \"--r\": \"0%\",\n    \"--t\": \"0%\"\n  }\n};\nconst _hoisted_5 = {\n  style: {\n    \"--l\": \"0%\",\n    \"--b\": \"0%\"\n  }\n};\nconst _hoisted_6 = {\n  style: {\n    \"--r\": \"0%\",\n    \"--b\": \"0%\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[1] || (_cache[1] = _createStaticVNode(\"<svg viewBox=\\\"0 0 50 50\\\" class=\\\"instrution_circle\\\" data-v-88816984><circle class=\\\"_dashed\\\" cx=\\\"25\\\" cy=\\\"25\\\" r=\\\"25\\\" vector-effect=\\\"non-scaling-stroke\\\" data-v-88816984></circle></svg><svg viewBox=\\\"0 0 50 2\\\" class=\\\"instrution_line\\\" data-v-88816984><line class=\\\"_dashed\\\" x1=\\\"0\\\" y1=\\\"1\\\" x2=\\\"50\\\" y2=\\\"1\\\" vector-effect=\\\"non-scaling-stroke\\\" data-v-88816984></line></svg><svg viewBox=\\\"0 0 50 2\\\" class=\\\"instrution_line instrution_line_vertical\\\" data-v-88816984><line class=\\\"_dashed\\\" x1=\\\"0\\\" y1=\\\"1\\\" x2=\\\"50\\\" y2=\\\"1\\\" vector-effect=\\\"non-scaling-stroke\\\" data-v-88816984></line></svg><div class=\\\"instrution_ball _middle_ball\\\" data-v-88816984></div>\", 4)), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode($setup[\"I1\"])]), _createElementVNode(\"div\", _hoisted_4, [_createVNode($setup[\"I2\"])]), _createElementVNode(\"div\", _hoisted_5, [_createVNode($setup[\"I3\"])]), _createElementVNode(\"div\", _hoisted_6, [_createVNode($setup[\"I4\"])])]), _createElementVNode(\"div\", {\n    class: \"instrution_closebtn\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.instrution.hidden && $setup.instrution.hidden(...args))\n  }, [_createVNode($setup[\"Closebtn\"], {\n    if_reverse: true\n  })])], 512 /* NEED_PATCH */)), [[_vShow, $setup.instrution.if_visible.value]]);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_hoisted_1","_createStaticVNode","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","$setup","_hoisted_4","_hoisted_5","_hoisted_6","onClick","_cache","args","instrution","hidden","if_reverse","if_visible","value"],"sources":["E:\\SnakeBall\\src\\components\\sections\\instrution.vue"],"sourcesContent":["<template>\r\n    <div class=\"instrution _fullscreen\" v-show=\"instrution.if_visible.value\">\r\n        <svg viewBox=\"0 0 50 50\" class=\"instrution_circle\">\r\n            <circle class=\"_dashed\" cx=\"25\" cy=\"25\" r=\"25\" vector-effect=\"non-scaling-stroke\" />\r\n        </svg>\r\n        <svg viewBox=\"0 0 50 2\" class=\"instrution_line\">\r\n            <line class=\"_dashed\" x1=\"0\" y1=\"1\" x2=\"50\" y2=\"1\" vector-effect=\"non-scaling-stroke\" />\r\n        </svg>\r\n        <svg viewBox=\"0 0 50 2\" class=\"instrution_line instrution_line_vertical\">\r\n            <line class=\"_dashed\" x1=\"0\" y1=\"1\" x2=\"50\" y2=\"1\" vector-effect=\"non-scaling-stroke\" />\r\n        </svg>\r\n        <div class=\"instrution_ball _middle_ball\"></div>\r\n        <div class=\"instrution_images\">\r\n            <div style=\"--l:0%;--t:0%\">\r\n                <I1 />\r\n            </div>\r\n            <div style=\"--r:0%;--t:0%\">\r\n                <I2 />\r\n            </div>\r\n            <div style=\"--l:0%;--b:0%\">\r\n                <I3 />\r\n            </div>\r\n            <div style=\"--r:0%;--b:0%\">\r\n                <I4 />\r\n            </div>\r\n        </div>\r\n        <div class=\"instrution_closebtn\" @click=\"instrution.hidden\">\r\n            <Closebtn :if_reverse=\"true\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { global } from \"@/stores/global\";\r\nimport I1 from \"@/components/instrutions/i1.vue\";\r\nimport I2 from \"@/components/instrutions/i2.vue\";\r\nimport I3 from \"@/components/instrutions/i3.vue\";\r\nimport I4 from \"@/components/instrutions/i4.vue\";\r\nimport Closebtn from \"@/components/ui/closebtn.vue\";\r\nimport { onMounted, ref } from \"vue\";\r\nimport gsap from \"gsap\";\r\nconst store = global();\r\n// instrution控制对象\r\nconst instrution = {\r\n    // DOM元素\r\n    container: null,\r\n    circle: null,\r\n    lines: null,\r\n    images: null,\r\n    //动画播放器\r\n    animater: null,\r\n    if_visible: ref(false), //instrution是否可见\r\n    init() {\r\n        this.container = document.querySelector(\".instrution\");\r\n        this.circle = document.querySelector(\".instrution_circle\");\r\n        this.lines = document.querySelectorAll(\".instrution_line\");\r\n        this.images = document.querySelectorAll(\".instrution_images div\");\r\n    },\r\n    // 重置instrution动画样式\r\n    reset() {\r\n        gsap.timeline()\r\n            .set(this.container, {\r\n                clipPath: \"polygon(0% 0%, 0% 0%, 0% 100%, 0% 100%)\",\r\n            })\r\n            .set(this.circle, {\r\n                scale: 0,\r\n            })\r\n            .set(this.lines, {\r\n                clipPath: \"polygon(50% 0%, 50% 0%, 50% 100%, 50% 100%)\",\r\n            })\r\n            .set(this.images, {\r\n                clipPath: \"circle(0%)\",\r\n                x: \"-20%\",\r\n            });\r\n    },\r\n    // 显示instrution\r\n    show(immediate) {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        if (immediate) immediate(); //存在立即执行代码，则立即执行\r\n        this.reset(); //重置\r\n        this.if_visible.value = true; //显示instrution\r\n        // 播放动画\r\n        this.animater = gsap\r\n            .timeline()\r\n            .to(this.container, {\r\n                clipPath: \"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)\",\r\n                duration: 1,\r\n                ease: \"power3.inOut\",\r\n            })\r\n            .to(\r\n                this.circle,\r\n                {\r\n                    scale: 1,\r\n                    duration: 1.5,\r\n                    ease: \"power3.out\",\r\n                },\r\n                \"<0.5\"\r\n            )\r\n            .to(\r\n                this.lines,\r\n                {\r\n                    clipPath: \"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)\",\r\n                    duration: 1.5,\r\n                    ease: \"power3.out\",\r\n                },\r\n                \"<\"\r\n            )\r\n            .to(\r\n                this.images,\r\n                {\r\n                    clipPath: \"circle(100%)\",\r\n                    x: 0,\r\n                    duration: 1.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: 0.05,\r\n                },\r\n                \"<0.4\"\r\n            );\r\n    },\r\n    // 隐藏instrution\r\n    hidden() {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        // 播放动画\r\n        this.animater = gsap.to(this.container, {\r\n            clipPath: \"polygon(100% 0%, 100% 0%, 100% 100%, 100% 100%)\",\r\n            duration: 1,\r\n            ease: \"power3.inOut\",\r\n            onComplete: () => {\r\n                this.if_visible.value = false; // 隐藏instrution\r\n            },\r\n        });\r\n    },\r\n};\r\n// 储存全局功能函数\r\nstore.show_instrution = () => {\r\n    // 这里将按钮音效播放放在show函数内部，是为了避免多次点击而多次播放音效的BUG\r\n    instrution.show(() => {\r\n        store.audio_controller.button.play();\r\n    });\r\n};\r\nonMounted(() => {\r\n    instrution.init();\r\n});\r\n</script>\r\n\r\n<style  scoped>\r\n.instrution {\r\n    --scale: 1;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: var(--color_back);\r\n    z-index: 1000;\r\n}\r\n.instrution_circle {\r\n    position: absolute;\r\n    width: calc(var(--scale) * 85rem);\r\n    height: calc(var(--scale) * 85rem);\r\n    stroke: var(--color_front);\r\n    stroke-dasharray: 0 calc(var(--scale) * 1rem);\r\n    overflow: visible;\r\n}\r\n.instrution_line {\r\n    position: absolute;\r\n    width: 100vmax;\r\n    stroke: var(--color_front);\r\n    stroke-dasharray: 0 calc(var(--scale) * 1rem);\r\n    overflow: visible;\r\n}\r\n.instrution_line_vertical {\r\n    transform: rotate(90deg);\r\n}\r\n.instrution_ball {\r\n    position: absolute;\r\n    background-color: var(--color_back);\r\n    border: calc(var(--scale) * 0.3rem) solid var(--color_front);\r\n    background-image: linear-gradient(0deg, transparent 1.9rem, var(--color_front) 2rem),\r\n        linear-gradient(90deg, transparent 1.9rem, var(--color_front) 2rem);\r\n    background-size: 2rem 2rem;\r\n}\r\n.instrution_images {\r\n    position: absolute;\r\n    width: calc(var(--scale) * 110rem);\r\n    height: calc(var(--scale) * 65rem);\r\n}\r\n.instrution_images div {\r\n    position: absolute;\r\n    justify-content: center;\r\n    align-items: center;\r\n    left: var(--l);\r\n    top: var(--t);\r\n    right: var(--r);\r\n    bottom: var(--b);\r\n    width: calc(var(--scale) * 3.2rem * 16);\r\n    height: calc(var(--scale) * 3.2rem * 9);\r\n    background-color: var(--color_front);\r\n    cursor: pointer;\r\n    overflow: hidden;\r\n}\r\n.instrution_images div svg {\r\n    position: relative;\r\n    width: 100%;\r\n    transform: scale(1.1);\r\n    transition: transform 1s var(--ease_out);\r\n}\r\n@media (hover: hover) {\r\n    .instrution_images div:hover svg {\r\n        transform: scale(1);\r\n    }\r\n}\r\n.instrution_closebtn {\r\n    position: absolute;\r\n}\r\n@media screen and (max-aspect-ratio: 0.7/1) {\r\n    .instrution_images {\r\n        flex-direction: column;\r\n        align-items: center;\r\n        width: auto;\r\n        height: auto;\r\n    }\r\n    .instrution_images div {\r\n        position: relative;\r\n        left: auto;\r\n        top: auto;\r\n        right: auto;\r\n        bottom: auto;\r\n        margin: calc(var(--scale) * 5rem) 0;\r\n    }\r\n}\r\n@media screen and (max-aspect-ratio: 0.6/1) {\r\n    .instrution_images div {\r\n        width: calc(var(--scale) * 4rem * 16);\r\n        height: calc(var(--scale) * 4rem * 9);\r\n    }\r\n}\r\n</style>"],"mappings":";;EACSA,KAAK,EAAC;AAAwB;;EAW1BA,KAAK,EAAC;AAAmB;;EACrBC,KAAqB,EAArB;IAAA;IAAA;EAAA;AAAqB;;EAGrBA,KAAqB,EAArB;IAAA;IAAA;EAAA;AAAqB;;EAGrBA,KAAqB,EAArB;IAAA;IAAA;EAAA;AAAqB;;EAGrBA,KAAqB,EAArB;IAAA;IAAA;EAAA;AAAqB;;wCArBlCC,mBAAA,CA4BM,OA5BNC,UA4BM,G,0BA7BVC,kBAAA,6qBAYQC,mBAAA,CAaM,OAbNC,UAaM,GAZFD,mBAAA,CAEM,OAFNE,UAEM,GADFC,YAAA,CAAMC,MAAA,Q,GAEVJ,mBAAA,CAEM,OAFNK,UAEM,GADFF,YAAA,CAAMC,MAAA,Q,GAEVJ,mBAAA,CAEM,OAFNM,UAEM,GADFH,YAAA,CAAMC,MAAA,Q,GAEVJ,mBAAA,CAEM,OAFNO,UAEM,GADFJ,YAAA,CAAMC,MAAA,Q,KAGdJ,mBAAA,CAEM;IAFDL,KAAK,EAAC,qBAAqB;IAAEa,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEN,MAAA,CAAAO,UAAU,CAACC,MAAM,IAAjBR,MAAA,CAAAO,UAAU,CAACC,MAAM,IAAAF,IAAA;MACtDP,YAAA,CAA+BC,MAAA;IAApBS,UAAU,EAAE;EAAI,G,sCA1BST,MAAA,CAAAO,UAAU,CAACG,UAAU,CAACC,KAAK,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}