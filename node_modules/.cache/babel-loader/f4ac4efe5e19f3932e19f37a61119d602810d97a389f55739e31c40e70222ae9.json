{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, vShow as _vShow, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"summary _fullscreen\"\n};\nconst _hoisted_2 = {\n  class: \"summary_inner\"\n};\nconst _hoisted_3 = {\n  class: \"summary_inner_result\"\n};\nconst _hoisted_4 = {\n  class: \"_font_6\"\n};\nconst _hoisted_5 = {\n  class: \"summary_inner_score\"\n};\nconst _hoisted_6 = {\n  class: \"_font_4\"\n};\nconst _hoisted_7 = {\n  class: \"summary_inner_selections\"\n};\nconst _hoisted_8 = {\n  class: \"_font_4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" safari浏览器对css的filter适配不友好，这里检测到如果是safari浏览器，则取消滤镜融球效果 \"), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"summary_background\", {\n      'summary_background_filter': !$setup.store.if_safari\n    }])\n  }, _cache[2] || (_cache[2] = [_createStaticVNode(\"<div class=\\\"summary_background_ball _middle_ball\\\" data-v-8139fbce></div><div class=\\\"summary_background_ballbox\\\" style=\\\"--s:1;--a:45;\\\" data-v-8139fbce><div class=\\\"summary_background_ball\\\" data-v-8139fbce></div></div><div class=\\\"summary_background_ballbox\\\" style=\\\"--s:1.2;--a:60;\\\" data-v-8139fbce><div class=\\\"summary_background_ball\\\" data-v-8139fbce></div></div><div class=\\\"summary_background_ballbox\\\" style=\\\"--s:1.5;--a:180;\\\" data-v-8139fbce><div class=\\\"summary_background_ball\\\" data-v-8139fbce></div></div><div class=\\\"summary_background_ballbox\\\" style=\\\"--s:1.3;--a:315;\\\" data-v-8139fbce><div class=\\\"summary_background_ball\\\" data-v-8139fbce></div></div>\", 5)]), 2 /* CLASS */), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n    class: \"summary_gray\"\n  }, [_createElementVNode(\"p\", {\n    class: \"_font_6\"\n  }, \"YOU\")], -1 /* HOISTED */)), _createElementVNode(\"div\", null, [_createElementVNode(\"p\", _hoisted_4, _toDisplayString($setup.player.if_active ? 'LIVE!' : 'DEAD!'), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_5, [_cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n    class: \"summary_gray\"\n  }, [_createElementVNode(\"p\", {\n    class: \"_font_4\"\n  }, \"SCORE\")], -1 /* HOISTED */)), _createElementVNode(\"div\", null, [_createElementVNode(\"p\", _hoisted_6, _toDisplayString($setup.player.score), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.store.summary_continue_game && $setup.store.summary_continue_game(...args))\n  }, [_createElementVNode(\"p\", _hoisted_8, _toDisplayString($setup.player.if_active ? 'CONTINUE' : 'TRY AGAIN'), 1 /* TEXT */)]), _createCommentVNode(\"\\r\\n                <div @click=\\\"store.show_rank\\\">\\r\\n                    <p class=\\\"_font_4\\\">RANK</p>\\r\\n                </div>\\r\\n                \"), _createElementVNode(\"div\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $setup.store.summary_to_welcome && $setup.store.summary_to_welcome(...args))\n  }, _cache[5] || (_cache[5] = [_createElementVNode(\"p\", {\n    class: \"_font_4\"\n  }, \"HOME\", -1 /* HOISTED */)]))])])], 512 /* NEED_PATCH */)), [[_vShow, $setup.summary.if_visible.value]]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_normalizeClass","$setup","store","if_safari","_createStaticVNode","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","player","if_active","_hoisted_5","_hoisted_6","score","_hoisted_7","onClick","_cache","args","summary_continue_game","_hoisted_8","summary_to_welcome","summary","if_visible","value"],"sources":["E:\\SnakeBall\\src\\components\\game\\summary.vue"],"sourcesContent":["<template>\r\n    <div class=\"summary _fullscreen\" v-show=\"summary.if_visible.value\">\r\n        <!-- safari浏览器对css的filter适配不友好，这里检测到如果是safari浏览器，则取消滤镜融球效果 -->\r\n        <div class=\"summary_background\" :class=\"{'summary_background_filter':!store.if_safari}\">\r\n            <div class=\"summary_background_ball _middle_ball\"></div>\r\n            <div class=\"summary_background_ballbox\" style=\"--s:1;--a:45;\">\r\n                <div class=\"summary_background_ball\"></div>\r\n            </div>\r\n            <div class=\"summary_background_ballbox\" style=\"--s:1.2;--a:60;\">\r\n                <div class=\"summary_background_ball\"></div>\r\n            </div>\r\n            <div class=\"summary_background_ballbox\" style=\"--s:1.5;--a:180;\">\r\n                <div class=\"summary_background_ball\"></div>\r\n            </div>\r\n            <div class=\"summary_background_ballbox\" style=\"--s:1.3;--a:315;\">\r\n                <div class=\"summary_background_ball\"></div>\r\n            </div>\r\n        </div>\r\n        <div class=\"summary_inner\">\r\n            <div class=\"summary_inner_result\">\r\n                <div class=\"summary_gray\">\r\n                    <p class=\"_font_6\">YOU</p>\r\n                </div>\r\n                <div>\r\n                    <p class=\"_font_6\">{{player.if_active?'LIVE!':'DEAD!'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"summary_inner_score\">\r\n                <div class=\"summary_gray\">\r\n                    <p class=\"_font_4\">SCORE</p>\r\n                </div>\r\n                <div>\r\n                    <p class=\"_font_4\">{{player.score}}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"summary_inner_selections\">\r\n                <div @click=\"store.summary_continue_game\">\r\n                    <p class=\"_font_4\">{{player.if_active?'CONTINUE':'TRY AGAIN'}}</p>\r\n                </div>\r\n                <!--\r\n                <div @click=\"store.show_rank\">\r\n                    <p class=\"_font_4\">RANK</p>\r\n                </div>\r\n                -->\r\n                <div @click=\"store.summary_to_welcome\">\r\n                    <p class=\"_font_4\">HOME</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { global } from \"@/stores/global\";\r\nimport { onMounted, ref } from \"vue\";\r\nimport gsap from \"gsap\";\r\nconst store = global();\r\nconst player = store.player;\r\n// summary控制对象\r\nconst summary = {\r\n    // DOM元素\r\n    inner_texts: null,\r\n    balls: null,\r\n    animater: null, //动画播放器\r\n    if_visible: ref(false), //summary是否可见\r\n    init() {\r\n        this.inner_texts = [...document.querySelectorAll(\".summary_inner p\")];\r\n        this.balls = document.querySelectorAll(\".summary_background_ball\");\r\n    },\r\n    // 重置summary动画样式\r\n    reset() {\r\n        gsap.set(this.inner_texts, {\r\n            y: \"100%\",\r\n            visibility: \"hidden\", // 防止在出现前、按钮就可以被点击\r\n        });\r\n    },\r\n    // 显示summary\r\n    show() {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        this.reset(); //重置\r\n        this.if_visible.value = true; //显示summary\r\n        // 播放动画\r\n        this.animater = gsap\r\n            .timeline()\r\n            .to(this.balls, {\r\n                scale: 1,\r\n                duration: 1,\r\n                ease: \"power3.inOut\",\r\n                stagger: 0.1,\r\n            })\r\n            // 第一部分文字出现、并消失\r\n            .to(\r\n                [this.inner_texts[0], this.inner_texts[1]],\r\n                {\r\n                    y: \"0%\",\r\n                    visibility: \"visible\", // 按钮出现、可以被点击\r\n                    duration: 0.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: 0.1,\r\n                },\r\n                \"<0.6\"\r\n            )\r\n            .to(\r\n                [this.inner_texts[0], this.inner_texts[1]],\r\n                {\r\n                    y: \"-100%\",\r\n                    duration: 0.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: 0.1,\r\n                },\r\n                \"+=0.3\"\r\n            )\r\n            // 第二部分文字出现、并消失\r\n            .to(\r\n                [this.inner_texts[2], this.inner_texts[3]],\r\n                {\r\n                    y: \"0%\",\r\n                    visibility: \"visible\",\r\n                    duration: 0.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: 0.1,\r\n                },\r\n                \"<0.4\"\r\n            )\r\n            .to(\r\n                [this.inner_texts[2], this.inner_texts[3]],\r\n                {\r\n                    y: \"-100%\",\r\n                    duration: 0.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: 0.1,\r\n                },\r\n                \"+=0.3\"\r\n            )\r\n            // 第三部分文字出现\r\n            .to(\r\n                [this.inner_texts[4], this.inner_texts[5], this.inner_texts[6]],\r\n                {\r\n                    y: \"0%\",\r\n                    visibility: \"visible\",\r\n                    duration: 0.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: 0.1,\r\n                },\r\n                \"<0.4\"\r\n            );\r\n    },\r\n    // 隐藏summary\r\n    hidden(immediate, next) {\r\n        // 动画播放器存在且正在播放动画：不执行函数，否则会因为动画冲突导致BUG\r\n        if (this.animater && this.animater.isActive()) return;\r\n        if (immediate) immediate(); //存在立即执行代码，则立即执行\r\n        // 播放动画\r\n        this.animater = gsap\r\n            .timeline()\r\n            .to(this.balls, {\r\n                scale: 0,\r\n                duration: 1,\r\n                ease: \"power3.out\",\r\n                onComplete: () => {\r\n                    this.if_visible.value = false; //隐藏summary\r\n                    if (next) next(); //如果有后续步骤则执行\r\n                },\r\n            })\r\n            .to(\r\n                [this.inner_texts[4], this.inner_texts[5], this.inner_texts[6]],\r\n                {\r\n                    y: \"-100%\",\r\n                    duration: 0.5,\r\n                    ease: \"power3.out\",\r\n                    stagger: 0.1,\r\n                },\r\n                \"<\"\r\n            );\r\n    },\r\n};\r\n// 储存全局功能函数\r\nstore.hidden_summary = summary.hidden.bind(summary);\r\n// 将show方法提供给stage，这里不和hidden方法一样储存到全局、是因为只有在stage里面才会调用show方法\r\ndefineExpose({ show: summary.show.bind(summary) });\r\nonMounted(() => {\r\n    summary.init();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.summary {\r\n    --scale: 1;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.summary_background {\r\n    position: absolute;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: calc(var(--scale) * 100rem);\r\n    height: calc(var(--scale) * 100rem);\r\n}\r\n.summary_background_ball {\r\n    transform: scale(0);\r\n}\r\n.summary_background_ballbox {\r\n    position: absolute;\r\n    width: calc(var(--scale) * 60rem);\r\n    height: calc(var(--scale) * 60rem);\r\n    animation: summary_background_ballbox calc(var(--s) * 5s) linear infinite;\r\n}\r\n@keyframes summary_background_ballbox {\r\n    0% {\r\n        transform: rotate(calc(var(--a) * 1deg));\r\n    }\r\n    100% {\r\n        transform: rotate(calc(var(--a) * 1deg + 360deg));\r\n    }\r\n}\r\n.summary_background_filter {\r\n    filter: contrast(1000%);\r\n    background-color: var(--color_back);\r\n    mix-blend-mode: var(--mix);\r\n}\r\n.summary_background_filter .summary_background_ballbox {\r\n    filter: blur(calc(var(--scale) * 3rem));\r\n}\r\n.summary_background_ballbox div {\r\n    position: absolute;\r\n    width: calc(var(--scale) * 8rem * var(--s));\r\n    height: calc(var(--scale) * 8rem * var(--s));\r\n    background-color: var(--color_front);\r\n    border-radius: 50%;\r\n}\r\n.summary_inner {\r\n    position: absolute;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.summary_inner > div {\r\n    position: absolute;\r\n    flex-direction: column;\r\n    align-items: center;\r\n}\r\n.summary_inner > div div {\r\n    overflow: hidden;\r\n}\r\n.summary_inner p {\r\n    color: var(--color_back);\r\n    white-space: nowrap;\r\n}\r\n.summary_gray p {\r\n    color: var(--color_gray);\r\n}\r\n.summary_inner_result p {\r\n    font-family: title;\r\n    line-height: calc(var(--scale) * 17rem);\r\n}\r\n.summary_inner_result div:nth-child(1) {\r\n    margin-left: calc(var(--scale) * -30rem);\r\n}\r\n.summary_inner_result div:nth-child(2) {\r\n    margin-right: calc(var(--scale) * -18rem);\r\n    mix-blend-mode: exclusion;\r\n}\r\n.summary_inner_result div:nth-child(2) p {\r\n    color: var(--color_white);\r\n}\r\n.summary_inner_score div,\r\n.summary_inner_selections div {\r\n    margin-bottom: calc(var(--scale) * 4.5rem);\r\n}\r\n.summary_inner_score div:last-child,\r\n.summary_inner_selections div:last-child {\r\n    margin-bottom: 0;\r\n}\r\n.summary_inner_selections p {\r\n    cursor: pointer;\r\n    transition: color 0.5s var(--ease_out);\r\n}\r\n@media (hover: hover) {\r\n    .summary_inner_selections p:hover {\r\n        color: var(--color_gray);\r\n    }\r\n}\r\n</style>"],"mappings":";;EACSA,KAAK,EAAC;AAAqB;;EAiBvBA,KAAK,EAAC;AAAe;;EACjBA,KAAK,EAAC;AAAsB;;EAKtBA,KAAK,EAAC;AAAS;;EAGrBA,KAAK,EAAC;AAAqB;;EAKrBA,KAAK,EAAC;AAAS;;EAGrBA,KAAK,EAAC;AAA0B;;EAE1BA,KAAK,EAAC;AAAS;;wCApClCC,mBAAA,CAgDM,OAhDNC,UAgDM,GA/CFC,mBAAA,2DAA8D,EAC9DC,mBAAA,CAcM;IAdDJ,KAAK,EAHlBK,eAAA,EAGmB,oBAAoB;MAAA,8BAAuCC,MAAA,CAAAC,KAAK,CAACC;IAAS;gCAH7FC,kBAAA,8qB,mBAkBQL,mBAAA,CA8BM,OA9BNM,UA8BM,GA7BFN,mBAAA,CAOM,OAPNO,UAOM,G,0BANFP,mBAAA,CAEM;IAFDJ,KAAK,EAAC;EAAc,IACrBI,mBAAA,CAA0B;IAAvBJ,KAAK,EAAC;EAAS,GAAC,KAAG,E,sBAE1BI,mBAAA,CAEM,cADFA,mBAAA,CAA2D,KAA3DQ,UAA2D,EAAAC,gBAAA,CAAtCP,MAAA,CAAAQ,MAAM,CAACC,SAAS,qC,KAG7CX,mBAAA,CAOM,OAPNY,UAOM,G,0BANFZ,mBAAA,CAEM;IAFDJ,KAAK,EAAC;EAAc,IACrBI,mBAAA,CAA4B;IAAzBJ,KAAK,EAAC;EAAS,GAAC,OAAK,E,sBAE5BI,mBAAA,CAEM,cADFA,mBAAA,CAAuC,KAAvCa,UAAuC,EAAAJ,gBAAA,CAAlBP,MAAA,CAAAQ,MAAM,CAACI,KAAK,iB,KAGzCd,mBAAA,CAYM,OAZNe,UAYM,GAXFf,mBAAA,CAEM;IAFAgB,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEhB,MAAA,CAAAC,KAAK,CAACgB,qBAAqB,IAA3BjB,MAAA,CAAAC,KAAK,CAACgB,qBAAqB,IAAAD,IAAA;MACpClB,mBAAA,CAAkE,KAAlEoB,UAAkE,EAAAX,gBAAA,CAA7CP,MAAA,CAAAQ,MAAM,CAACC,SAAS,4C,GAEzCZ,mBAAA,2JAIG,EACHC,mBAAA,CAEM;IAFAgB,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEhB,MAAA,CAAAC,KAAK,CAACkB,kBAAkB,IAAxBnB,MAAA,CAAAC,KAAK,CAACkB,kBAAkB,IAAAH,IAAA;gCACjClB,mBAAA,CAA2B;IAAxBJ,KAAK,EAAC;EAAS,GAAC,MAAI,oB,2CA5CEM,MAAA,CAAAoB,OAAO,CAACC,UAAU,CAACC,KAAK,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}